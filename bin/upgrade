#!/bin/sh

_good="\033[32m"
_fail="\033[31m"
_rset="\033[0m"

do_upgrade() {
	pkg upgrade
	apt autoremove
}

close_session() {
	printf "\nClose this session? [y/n] "
	IFS= read -r _close_session
	if [ "${_close_session}" = "y" ] ; then
		exit
	fi
}

if do_upgrade ; then
	printf "${_good}Upgrade successful.${_rset}\n"
	close_session
else
	printf "${_fail}Upgrade failed.${_rset}\n"
	exit 1
fi
